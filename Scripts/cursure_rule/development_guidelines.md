# AI 助手开发规则与指南

本文档总结了与 AI 助手协作时需要遵循的核心规则和开发模式，以确保代码质量和项目可维护性。

## 1. 沟通规则

- **语言**: 与 AI 助手的所有交互都应使用 **中文**。

## 2. 核心设计原则

- **KISS (Keep It Simple, Stupid)**: 始终选择最简洁、最直接的实现方式。拒绝任何形式的过度工程或不必要的复杂性。
- **代码清晰**: 代码应该易于阅读和理解，优先保证可维护性。

## 3. 配置导出系统实现规范

这是项目的关键部分，必须严格遵守以下规则：

### 3.1. 动态化与自动化

- **禁止硬编码**: 严禁在任何 `ConfigExporter` 的子类（如 `SkillConfigExporter.cs`）中硬编码要导出的字段。
- **强制使用反射**: 必须在通用的基类 `ConfigExporter<T>` 中，通过 **C# 反射 (Reflection)** 机制来动态地发现和序列化所有 `public` 字段。
- **自动同步**: 设计的目标是，当开发人员在任何配置类（如 `Skill.cs`, `ItemType.cs` 等）中添加、删除或修改字段时，配置导出脚本 **无需任何代码改动** 即可自动适应这些变化。

### 3.2. Lua 文件输出格式

所有由配置导出系统生成的 `.lua` 文件，必须严格遵循以下模板结构：

```lua
-- {ConfigName}.lua
-- Generated by ConfigExporter. Any custom code will be overwritten.

---@class {ConfigName}
---@field Data table<string, table>

---@type {ConfigName}
local {ConfigName} = {Data = {}}

-- --- AUTO GENERATED CONFIG BEGIN ---
{ConfigName}.Data = {
    -- 数据内容由反射动态生成
    ['some_asset_name'] = {
        -- ... fields ...
    },
    -- ... more assets ...
}
-- --- AUTO GENERATED CONFIG END ---

return {ConfigName}
```

- `{ConfigName}` 会根据导出器类名动态替换（例如，`SkillConfigExporter` -> `SkillConfig`）。
- 整个结构，包括文件顶部的注释、LuaDoc、`local` 变量的创建和赋值，以及最后的 `return` 语句，都必须由基类 `ConfigExporter<T>` 中的通用 `Export` 方法统一生成。 